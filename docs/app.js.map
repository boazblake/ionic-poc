{"version":3,"sources":["app/Components/calendar/calendar.js","app/Components/calendar/model.js","app/Components/component.js","app/Components/day.js","app/Components/editor.js","app/Components/event-list.js","app/Components/hour.js","app/Components/index.js","app/Components/modal.js","app/Components/nav-link.js","app/Pages/Auth/Validations.js","app/Pages/Auth/fns.js","app/Pages/Auth/login-user.js","app/Pages/Auth/register-user.js","app/Pages/event.js","app/Pages/home.js","app/Pages/index.js","app/Styles/animations.js","app/Styles/index.js","app/Utils/.secrets.js","app/Utils/http.js","app/Utils/index.js","app/Utils/local-storage.js","app/Utils/validations.js","app/index.js","app/initialize.js","app/model.js","app/routes.js"],"names":["Toolbar","mdl","attrs","view","m","onchange","e","route","set","target","value","type","data","startDate","onclick","_","Date","MonthsToolbar","year","parseInt","selected","month","day","dir","CalendarBody","dto","daysOfTheWeek","map","toUpperCase","week","class","Calendar","updateYear","toString","daysInMonth","getDate","updateMonth","length","goToDate","_year","_month","_day","getMonthByIdx","idx","monthsOfTheYear","isCalenderDay","date","isNotCalenderDay","createCalendarDayViewModel","isSameMonth","getMonthMatrix","matrix","start","end","weekStartsOn","weekDay","calendarModel","_date","split","today","isLeapYear","calendarDay","currentDay","Component","dayModel","timeFormats","format","reduce","hour","Day","_dom","loadTask","http","locals","getTask","currentShortDate","onError","state","err","error","status","redraw","onSuccess","load","HTTP","fork","planDay","dom","toAnchor","console","log","querySelector","el","document","getElementById","oninit","oncreate","modal","Editor","Object","keys","Hour","time","events","values","submitEventTask","shortDate","timestamp","allday","startTime","endTime","title","notes","getHour","getMin","selectedDate","url","backEnd","postTask","EventForm","disabled","oninput","checked","text","currentLongDate","valueOf","addNewEvent","Modal","header","body","footer","splitTime","Event","getHeight","startHour","startMin","endHour","endMin","endDate","event","col","user","name","style","top","height","EventsList","key","id","children","child","handlers","types","fn","acc","assign","NavLink","href","link","classList","rest","Link","navSelected","ValidateRegistration","identity","ValidateLogin","nameLense","passwordLense","passwordConfirmLense","emailLense","emailConfirmLense","NAME_REQUIRED_MSG","PASSWORD_REQUIRED_MSG","EMAIL_REQUIRED_MSG","EMAILS_MUST_MATCH","INVALID_EMAIL_FORMAT","PASSWORDS_MUST_MATCH","inputsMatch","input1","input2","validateName","apLeft","isRequired","validateEmails","confirmEmail","email","emailFormat","validateEmail","validatePasswords","password","confirmPassword","validatePassword","validateUserRegistrationTask","ap","failureMap","mergeAll","toTask","validateLoginTask","mergeCarts","accnt","cart","add","toAccountVM","accnts","JSON","parse","account","objectId","address","setUserToken","sessionStorage","setItem","stringify","isAuth","loginUserTask","login","getUserAccountTask","loginTask","registerUserTask","isAdmin","createAccountTask","userId","linkAccountTask","validateForm","errs","errors","errorMsg","message","showErrorMsg","isSubmitted","userModel","chain","dataModel","httpError","undefined","Stream","resetState","Login","onremove","role","onsubmit","preventDefault","placeholder","onkeyup","form","isLoading","RegisterUser","Register","gotoroute","deleteEvent","param","min","localStorage","Home","popIn","transform","opacity","fadeIn","fadeInUp","slideInRight","visibility","slideInLeft","slideOutRight","slideInDown","duration","easing","fill","transitionEndPromise","element","transitionEnded","removeEventListener","Promise","addEventListener","AnimatePage","animation","Animate","pause","NoOp","setTimeout","animate","finished","then","AnimateChildren","getUserToken","getItem","BackEnd","API_KEY","APP_ID","baseUrl","headers","onProgress","lengthComputable","loadingProgress","max","total","loaded","onLoad","onLoadStart","onLoadEnd","xhrProgress","config","xhr","onprogress","onload","onloadstart","onloadend","parseHttpError","rej","response","parseHttpSuccess","res","window","HttpTask","_headers","method","Task","request","withCredentials","backEndUrl","putTask","v","secureImg","match","replace","randomPause","Math","random","Pause","n","nameFromRoute","jsonCopy","isSideBarActive","settings","profile","sidebar","range","size","Array","toISOString","getFullDate","toHourViewModel","pad0Left","num","formatDateString","padded","d","isEqual","a","b","pad00Min","getHoursInDay","newTaskFromPromise","p","setTask","getOrElse","val","x","validate","rule","lens","msg","not","isEmpty","IsNotNil","isNil","isNotNullOrEmpty","isNullOrEmpty","maxLength","maxSize","onlyAlpha","onlyAlphaNumeric","onlyAlphaNumericUnderscore","onlyAlphaNumericSpace","onlyAlphaNumericSpaceUnderscore","onlyAlphaNumericSpaceSpecial","phoneFormat","urlFormat","onlyNumeric","maxLengthNullable","Maybe","fromNullable","unique","lookup","y","inDateRange","allCaps","str","isNilOrEmptyOrAtom","item","FunConfig","configure","root","winW","innerWidth","module","hot","accept","process","env","NODE_ENV","navigator","serviceWorker","register","registration","catch","registrationError","getProfile","w","checkWidth","lastProfile","model","requestAnimationFrame","require","timeFormat","isLoggedIn","inspector","slug","routes","render","onmatch","_d"],"mappings":"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","file":"docs/app.js","sourcesContent":["import { getMonthMatrix, goToDate, calendarDay, getMonthByIdx } from \"./model\"\nimport { daysOfTheWeek, shortDate, formatDateString } from \"Utils\"\n\nconst Toolbar = ({ attrs: { mdl } }) => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\".toolbar\", [\n        m(\"input\", {\n          onchange: (e) => m.route.set(e.target.value),\n          type: \"date\",\n          value: mdl.data.startDate,\n        }),\n        m(\n          \"button.width-100\",\n          { onclick: (_) => m.route.set(shortDate(new Date())) },\n          \"Today\"\n        ),\n      ]),\n  }\n}\n\nconst MonthsToolbar = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\".frow width-100  mt-10\", [\n        m(\".frow width-100 row-between mt-10\", [\n          m(\n            \"button.prevMonth\",\n            m(\n              \"h3\",\n              {\n                onclick: (_) => {\n                  m.route.set(\n                    `/${formatDateString({\n                      year: parseInt(mdl.data.selected.year) - 1,\n                      month: mdl.data.selected.month,\n                      day: mdl.data.selected.day,\n                    })}`\n                  )\n                },\n              },\n              parseInt(mdl.data.selected.year) - 1\n            )\n          ),\n          m(\".centerMonthGroup\", [\n            m(\n              \"h2.currentMonth\",\n              getMonthByIdx(parseInt(mdl.data.selected.month) - 1)\n            ),\n            m(\"h3.text-center\", parseInt(mdl.data.selected.year)),\n          ]),\n          m(\n            \"button.nextMonth\",\n            m(\n              \"h3\",\n              {\n                onclick: (_) => {\n                  m.route.set(\n                    `/${formatDateString({\n                      year: parseInt(mdl.data.selected.year) + 1,\n                      month: mdl.data.selected.month,\n                      day: mdl.data.selected.day,\n                    })}`\n                  )\n                },\n              },\n              parseInt(mdl.data.selected.year) + 1\n            )\n          ),\n        ]),\n        m(\".frow width-100 row-between mt-10\", [\n          m(\n            \"button\",\n            {\n              onclick: (_) => {\n                goToDate({\n                  year: mdl.data.selected.year,\n                  month: mdl.data.selected.month,\n                  day: mdl.data.selected.day,\n                  dir: -1,\n                })\n              },\n            },\n            m(\"h4\", getMonthByIdx(parseInt(mdl.data.selected.month - 2)))\n          ),\n\n          m(\n            \"button\",\n            {\n              onclick: (_) => {\n                goToDate({\n                  year: mdl.data.selected.year,\n                  month: mdl.data.selected.month,\n                  day: mdl.data.selected.day,\n                  dir: 1,\n                })\n              },\n            },\n            m(\"h4\", getMonthByIdx(parseInt(mdl.data.selected.month)))\n          ),\n        ]),\n      ])\n    },\n  }\n}\n\nconst CalendarBody = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      let dto = getMonthMatrix(mdl.data)\n      return m(\".frow frow-container\", [\n        m(MonthsToolbar, { mdl }),\n        m(\n          \".frow width-100 row-between mt-10\",\n          daysOfTheWeek.map((day) =>\n            m(\n              \".col-xs-1-7 text-center\",\n              m(\n                \"span.width-auto\",\n\n                day[0].toUpperCase()\n              )\n            )\n          )\n        ),\n        m(\n          \".frow centered-column width-100 row-between mt-10 \",\n          dto.map((week) =>\n            m(\n              \".frow width-100\",\n              week.map(({ day, dir }) =>\n                m(\n                  \".col-xs-1-7 text-center\",\n                  {\n                    onclick: (_) =>\n                      goToDate({\n                        year: mdl.data.selected.year,\n                        month: mdl.data.selected.month,\n                        day,\n                        dir,\n                      }),\n                    class: calendarDay(mdl.data)(day, dir),\n                  },\n                  m(\"span.day\", day)\n                )\n              )\n            )\n          )\n        ),\n      ])\n    },\n  }\n}\n\nexport const Calendar = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\".calendar\", [\n        m(Toolbar, { mdl: mdl.Calendar }),\n        m(CalendarBody, { mdl: mdl.Calendar }),\n      ])\n    },\n  }\n}\n","import {\n  eachDayOfInterval,\n  endOfISOWeek,\n  endOfMonth,\n  isSameMonth,\n  startOfISOWeek,\n  startOfMonth,\n  eachWeekOfInterval,\n  format,\n  differenceInMonths,\n  parseISO,\n} from \"date-fns\"\nimport {\n  isLeapYear,\n  formatDateString,\n  pad0Left,\n  monthsOfTheYear,\n  shortDate,\n  isEqual,\n} from \"Utils\"\n\nconst updateYear = (year, dir) => (parseInt(year) + dir).toString()\n\nconst daysInMonth = (month, year) =>\n  new Date(parseInt(year), parseInt(month) + 1, 0).getDate()\n\nconst updateMonth = (month, dir) =>\n  (parseInt(month) + dir).toString().length == 1\n    ? pad0Left((parseInt(month) + dir).toString())\n    : (parseInt(month) + dir).toString()\n\nexport const goToDate = ({ year, month, day, dir }) => {\n  let _year = year\n  let _month = updateMonth(month, dir)\n  let _day = day || \"01\"\n\n  if (_month >= 13) {\n    _year = updateYear(_year, dir)\n    _month = \"01\"\n  }\n\n  if (_month <= 0) {\n    _year = updateYear(_year, dir)\n    _month = \"12\"\n  }\n  m.route.set(`/${formatDateString({ year: _year, month: _month, day: _day })}`)\n}\n\n// const updateMonthDto = (year, month, day, dir) => {\n//   let _year = year\n//   let _month = updateMonth(month, dir)\n//   let _day = day || \"01\"\n\n//   if (_month >= 13) {\n//     _year = updateYear(_year, dir)\n//     _month = \"01\"\n//   }\n\n//   if (_month <= 0) {\n//     _year = updateYear(_year, dir)\n//     _month = \"12\"\n//   }\n\n//   return calendarModel(\n//     formatDateString({ year: _year, month: _month, day: _day })\n//   )\n// }\n\nexport const getMonthByIdx = (idx) =>\n  idx >= 12\n    ? monthsOfTheYear[0]\n    : idx < 0\n    ? monthsOfTheYear[11]\n    : monthsOfTheYear[idx]\n\nexport const isCalenderDay = (date) => ({\n  day: format(date, \"dd\"),\n  dir: 0,\n})\n\nexport const isNotCalenderDay = (day, date) => ({\n  day: format(day, \"dd\"),\n  dir: differenceInMonths(parseISO(shortDate(date)), day) == 0 ? -1 : +1,\n})\n\nexport const createCalendarDayViewModel = (day, date, { isSameMonth }) =>\n  isSameMonth ? isCalenderDay(day) : isNotCalenderDay(day, date)\n\nexport const getMonthMatrix = ({ year, month }) => {\n  const date = new Date(parseInt(year), parseInt(month - 1))\n  const matrix = eachWeekOfInterval(\n    {\n      start: startOfMonth(date),\n      end: endOfMonth(date),\n    },\n    { weekStartsOn: 1 }\n  )\n\n  return matrix.map((weekDay) =>\n    eachDayOfInterval({\n      start: startOfISOWeek(weekDay),\n      end: endOfISOWeek(weekDay),\n    }).map((day) =>\n      createCalendarDayViewModel(day, date, {\n        isSameMonth: isSameMonth(date, day),\n      })\n    )\n  )\n}\n\nexport const calendarModel = (date = shortDate()) => {\n  let _date = shortDate(date).split(\"-\")\n  let today = shortDate().split(\"-\")\n  let year = _date[0]\n  let month = _date[1]\n  let day = _date[2]\n\n  let dto = {\n    isLeapYear: isLeapYear(year),\n    startDate: date,\n    selected: { year, month, day },\n    today: {\n      year: today[0],\n      month: today[1],\n      day: today[2],\n    },\n    year,\n    month,\n    day,\n    daysInMonth: daysInMonth(month, year),\n  }\n  return dto\n}\n\nexport const calendarDay = ({ today, selected }) => (currentDay, dir) => {\n  if (dir !== 0) {\n    return \"notThisMonth\"\n  }\n  if (\n    isEqual(today.day, currentDay) &&\n    isEqual(today.month, selected.month) &&\n    isEqual(today.year, selected.year)\n  ) {\n    return \"isToday\"\n  }\n\n  if (\n    isEqual(currentDay, selected.day) &&\n    isEqual(selected.month, selected.month)\n  ) {\n    return \"selectedDay\"\n  }\n}\n","const Component = () => {\r\n  return {\r\n    view: () => m(\".\"),\r\n  }\r\n}\r\n","import { Hour, Editor } from \"Components\"\r\nimport { getHoursInDay } from \"Utils\"\r\n\r\nexport const dayModel = (mdl, date = new Date()) =>\r\n  getHoursInDay(mdl.timeFormats[mdl.format()]).reduce((day, hour) => {\r\n    day[hour] = {}\r\n    return day\r\n  }, {})\r\n\r\nexport const Day = ({ attrs: { mdl } }) => {\r\n  let _dom\r\n  const loadTask = (http) => (mdl) => locals.getTask(mdl.currentShortDate()) //timetsamp to day model ...\r\n\r\n  const onError = (state) => (err) => {\r\n    state.error = err\r\n    state.status = \"failed\"\r\n    m.redraw()\r\n  }\r\n\r\n  const onSuccess = (mdl, state) => (data) => {\r\n    state.data = data\r\n    if (data) {\r\n      mdl.Day.data = data\r\n    }\r\n    state.error = null\r\n    state.status = \"success\"\r\n    m.redraw()\r\n  }\r\n\r\n  const load = (state) => ({ attrs: { mdl } }) => {\r\n    loadTask(HTTP)(mdl).fork(onError(state), onSuccess(mdl, state))\r\n  }\r\n\r\n  const planDay = (mdl) => ({ dom }) => {\r\n    if (mdl.toAnchor()) {\r\n      console.log(\r\n        \"anchor\",\r\n        mdl.toAnchor(),\r\n        dom,\r\n        dom.querySelector(`${mdl.toAnchor().toString()}`)\r\n      )\r\n\r\n      let el = document.getElementById(mdl.toAnchor())\r\n\r\n      console.log(\"el\", el)\r\n    }\r\n  }\r\n\r\n  return {\r\n    oninit: load,\r\n    oncreate: planDay(mdl),\r\n    view: ({ attrs: { mdl } }) => {\r\n      console.log(_dom)\r\n      return m(\r\n        \".day\",\r\n        m(\".frow-container\", [\r\n          m(\r\n            `.${mdl.state.modal() ? \"bg-warn\" : \"bg-info\"}`,\r\n            m(\r\n              \"button.frow.width-100\",\r\n              {\r\n                onclick: (e) => mdl.state.modal(!mdl.state.modal()),\r\n              },\r\n              mdl.state.modal() ? \"Cancel\" : \"Add Event\"\r\n            )\r\n          ),\r\n          m(\".day-container\", [\r\n            mdl.state.modal() && m(Editor, { mdl }),\r\n            Object.keys(mdl.Day.data).map((hour, idx) => {\r\n              return m(Hour, {\r\n                mdl,\r\n                hour: mdl.Day.data[hour],\r\n                time: hour,\r\n                events: Object.values(mdl.Day.data[hour]),\r\n              })\r\n            }),\r\n          ]),\r\n        ])\r\n      )\r\n    },\r\n  }\r\n}\r\n","import { Modal } from \"Components\"\r\nimport { HTTP } from \"Utils\"\r\n\r\nconst submitEventTask = (http) => (mdl) => ({\r\n  shortDate,\r\n  timestamp,\r\n  allday,\r\n  startTime,\r\n  endTime,\r\n  title,\r\n  notes,\r\n}) => {\r\n  let getHour = (time) => time.split(\":\")[0]\r\n  let getMin = (time) => time.split(\":\")[1]\r\n  let { year, month, day } = mdl.selectedDate\r\n\r\n  let url = \"data/Events\"\r\n  let dto = {\r\n    endTime: new Date(year, month, day, getHour(endTime), getMin(endTime)),\r\n    startTime: new Date(\r\n      year,\r\n      month,\r\n      day,\r\n      getHour(startTime),\r\n      getMin(startTime)\r\n    ),\r\n    shortDate,\r\n    notes,\r\n    title,\r\n    allday,\r\n  }\r\n\r\n  console.log(dto)\r\n\r\n  return http.backEnd.postTask(mdl)(url)(dto)\r\n}\r\n\r\nconst EventForm = ({ attrs: { state } }) => {\r\n  //will need to be done on fetch??\r\n  // let startSplit = state.startTime.split(\":\")\r\n\r\n  // mdl.Day.data[`${startSplit[0]}:00`][startSplit[1]] = state\r\n  // localStorage.setItem(state.date, JSON.stringify(mdl.Day.data))\r\n  // mdl.state.modal(false)\r\n  // m.redraw()\r\n\r\n  return {\r\n    view: () =>\r\n      m(\"form.event-form\", [\r\n        m(\r\n          \"label\",\r\n          m(\"input\", {\r\n            onchange: (e) => m.route.set(e.target.value),\r\n            type: \"date\",\r\n            value: state.shortDate,\r\n            disabled: state.allday,\r\n          })\r\n        ),\r\n        m(\".frow row\", [\r\n          [\r\n            m(\r\n              \"label.col-xs-1-3\",\r\n              m(\"input\", {\r\n                oninput: (e) => (state.startTime = e.target.value),\r\n                value: state.startTime,\r\n                type: \"time\",\r\n                disabled: state.allday,\r\n              }),\r\n              \"Start Time\"\r\n            ),\r\n            m(\r\n              \"label.col-xs-1-3\",\r\n              m(\"input\", {\r\n                oninput: (e) => (state.endTime = e.target.value),\r\n                value: state.endTime,\r\n                type: \"time\",\r\n                disabled: state.allday,\r\n              }),\r\n              \"End Time\"\r\n            ),\r\n          ],\r\n          m(\r\n            \"label.col-xs-1-3.pt-15 pl-60\",\r\n            m(\"input\", {\r\n              type: \"checkbox\",\r\n              checked: state.allday,\r\n              onclick: (e) => (state.allday = !state.allday),\r\n            }),\r\n            \"All Day\"\r\n          ),\r\n        ]),\r\n\r\n        m(\r\n          \"label\",\r\n          m(\"input\", {\r\n            type: \"text\",\r\n            value: state.text,\r\n            oninput: (e) => (state.title = e.target.value),\r\n          }),\r\n          \"Title\"\r\n        ),\r\n        m(\r\n          \"label\",\r\n          m(\"input\", {\r\n            type: \"text\",\r\n            value: state.notes,\r\n            oninput: (e) => (state.notes = e.target.value),\r\n          }),\r\n          \"Notes\"\r\n        ),\r\n      ]),\r\n  }\r\n}\r\n\r\nexport const Editor = ({ attrs: { mdl } }) => {\r\n  // console.log(\"editor:: find event?\", mdl)\r\n  const state = {\r\n    shortDate: mdl.currentShortDate(),\r\n    timestamp: mdl.currentLongDate().valueOf,\r\n    allday: false,\r\n    startTime: \"\",\r\n    endTime: \"\",\r\n    title: \"\",\r\n    notes: \"\",\r\n  }\r\n\r\n  const addNewEvent = (state, mdl) => {\r\n    const onError = (state) => (err) => {\r\n      state.error = err\r\n      state.status = \"failed\"\r\n      m.redraw()\r\n    }\r\n\r\n    const onSuccess = (mdl, state) => (data) => {\r\n      state.data = data\r\n      if (data) {\r\n        mdl.Day.data = data\r\n      }\r\n      state.error = null\r\n      state.status = \"success\"\r\n      m.redraw()\r\n    }\r\n\r\n    submitEventTask(HTTP)(mdl)(state).fork(\r\n      onError(state),\r\n      onSuccess(mdl, state)\r\n    )\r\n  }\r\n\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        Modal,\r\n        { mdl },\r\n        {\r\n          header: m(\"h3\", `Add Event`),\r\n          body: m(EventForm, { mdl, state }),\r\n          footer: m(\r\n            \"button\",\r\n            { onclick: (e) => addNewEvent(state, mdl) },\r\n            \"Submit\"\r\n          ),\r\n        }\r\n      ),\r\n  }\r\n}\r\n","import { differenceInMinutes } from \"date-fns\"\r\nimport { getFullDate } from \"Utils\"\r\nconst splitTime = (time) => time.split(\":\")\r\n\r\nconst Event = ({ attrs: { mdl } }) => {\r\n  const getHeight = ([startHour, startMin], [endHour, endMin]) => {\r\n    const startDate = getFullDate(mdl.selectedDate, startHour, startMin)\r\n    const endDate = getFullDate(mdl.selectedDate, endHour, endMin)\r\n    return differenceInMinutes(startDate, endDate)\r\n  }\r\n\r\n  return {\r\n    view: ({ attrs: { mdl, event, col } }) =>\r\n      m(\r\n        `.col-xs-1-${col + 2}`,\r\n        m(\r\n          \".event-list-item \",\r\n          {\r\n            onclick: (e) =>\r\n              m.route.set(\r\n                `/${mdl.user.name}/${mdl.currentShortDate()}/${\r\n                  splitTime(event.startTime)[0]\r\n                }/${splitTime(event.startTime)[1]}`\r\n              ),\r\n            style: {\r\n              top: `${splitTime(event.startTime)[1]}px`,\r\n              height: `${getHeight(\r\n                splitTime(event.endTime),\r\n                splitTime(event.startTime)\r\n              )}px`,\r\n            },\r\n          },\r\n          event.title\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport const EventsList = ({ attrs: { mdl } }) => {\r\n  return {\r\n    view: ({ attrs: { events } }) =>\r\n      m(\r\n        \".event-list frow \",\r\n        events.map((event, idx) =>\r\n          m(Event, { mdl, event, col: events.length, key: idx })\r\n        )\r\n      ),\r\n  }\r\n}\r\n","import { EventsList } from \"Components\"\r\n\r\nexport const Hour = () => {\r\n  return {\r\n    view: ({ attrs: { mdl, hour, time, events } }) => {\r\n      return m(\r\n        \".frow \",\r\n        m(\".hour \", [\r\n          m(\"p.hour-time\", { id: time }, time),\r\n          [\r\n            m(EventsList, { mdl, events }),\r\n            m(\".half-hour\", m(\".top\")),\r\n            m(\".half-hour\", m(\".bottom\")),\r\n          ],\r\n        ])\r\n      )\r\n    },\r\n  }\r\n}\r\n","export * from \"./calendar/calendar.js\"\r\nexport * from \"./day.js\"\r\nexport * from \"./modal.js\"\r\nexport * from \"./editor.js\"\r\nexport * from \"./hour.js\"\r\nexport * from \"./event-list.js\"\r\nexport * from \"./nav-link.js\"\r\n","export const Modal = () => {\r\n  return {\r\n    view: ({ children }) => {\r\n      return m(\r\n        \".modal-container\",\r\n        m(\r\n          \".frow-container\",\r\n          children.map((child) =>\r\n            m(\".modal.frow column-center\", [\r\n              m(\".modal-header\", child.header),\r\n              m(\".modal-body\", child.body),\r\n              m(\".modal-footer\", child.footer),\r\n            ])\r\n          )\r\n        )\r\n      )\r\n    },\r\n  }\r\n}\r\n","const handlers = (types, fn) =>\r\n  types.reduce((acc, type) => Object.assign(acc, { [type]: fn }), {})\r\n\r\nexport const NavLink = () => {\r\n  return {\r\n    view: ({ attrs: { mdl, href, link, classList, ...rest } }) =>\r\n      m(\r\n        m.route.Link,\r\n        {\r\n          ...handlers([\"onclick\", \"onmouseover\", \"onmouseout\"], (e) =>\r\n            console.log(e.type)\r\n          ),\r\n          href,\r\n          class: `nav-link ${classList} ${\r\n            mdl.state.navSelected() == link && \"shadow\"\r\n          }`,\r\n          ...rest,\r\n        },\r\n        link\r\n      ),\r\n  }\r\n}\r\n","import { curryN, identity, lensProp, mergeAll } from \"ramda\"\r\nimport { Success } from \"data.validation\"\r\nimport { validate, isRequired, emailFormat } from \"Utils\"\r\n\r\nconst ValidateRegistration = Success(curryN(3, identity))\r\nconst ValidateLogin = Success(curryN(2, identity))\r\n\r\nconst nameLense = lensProp(\"name\")\r\nconst passwordLense = lensProp(\"password\")\r\nconst passwordConfirmLense = lensProp(\"confirmPassword\")\r\nconst emailLense = lensProp(\"email\")\r\nconst emailConfirmLense = lensProp(\"confirmEmail\")\r\n\r\nconst NAME_REQUIRED_MSG = \"A Name is required\"\r\nconst PASSWORD_REQUIRED_MSG = \"A Password is required\"\r\nconst EMAIL_REQUIRED_MSG = \"An Email is required\"\r\nconst EMAILS_MUST_MATCH = \"Emails do not match\"\r\nconst INVALID_EMAIL_FORMAT = \"Email must be a valid format\"\r\nconst PASSWORDS_MUST_MATCH = \"Passwords do not match\"\r\n\r\nconst inputsMatch = (input1) => (input2) => input2 === input1\r\n\r\nconst validateName = (data) =>\r\n  Success(data).apLeft(validate(isRequired, nameLense, NAME_REQUIRED_MSG, data))\r\n\r\nconst validateEmails = (data) =>\r\n  Success(data)\r\n    .apLeft(validate(isRequired, emailLense, EMAIL_REQUIRED_MSG, data))\r\n    .apLeft(validate(isRequired, emailConfirmLense, EMAIL_REQUIRED_MSG, data))\r\n    .apLeft(\r\n      validate(\r\n        inputsMatch(data.confirmEmail),\r\n        emailLense,\r\n        EMAILS_MUST_MATCH,\r\n        data\r\n      )\r\n    )\r\n    .apLeft(\r\n      validate(\r\n        inputsMatch(data.email),\r\n        emailConfirmLense,\r\n        EMAILS_MUST_MATCH,\r\n        data\r\n      )\r\n    )\r\n    .apLeft(\r\n      validate(emailFormat, emailConfirmLense, INVALID_EMAIL_FORMAT, data)\r\n    )\r\n    .apLeft(validate(emailFormat, emailLense, INVALID_EMAIL_FORMAT, data))\r\n\r\nconst validateEmail = (data) =>\r\n  Success(data)\r\n    .apLeft(validate(isRequired, emailLense, EMAIL_REQUIRED_MSG, data))\r\n    .apLeft(validate(emailFormat, emailLense, INVALID_EMAIL_FORMAT, data))\r\n\r\nconst validatePasswords = (data) =>\r\n  Success(data)\r\n    .apLeft(validate(isRequired, passwordLense, PASSWORD_REQUIRED_MSG, data))\r\n    .apLeft(\r\n      validate(isRequired, passwordConfirmLense, PASSWORD_REQUIRED_MSG, data)\r\n    )\r\n    .apLeft(\r\n      validate(\r\n        inputsMatch(data.password),\r\n        passwordConfirmLense,\r\n        PASSWORDS_MUST_MATCH,\r\n        data\r\n      )\r\n    )\r\n    .apLeft(\r\n      validate(\r\n        inputsMatch(data.confirmPassword),\r\n        passwordLense,\r\n        PASSWORDS_MUST_MATCH,\r\n        data\r\n      )\r\n    )\r\n\r\nconst validatePassword = (data) =>\r\n  Success(data).apLeft(\r\n    validate(isRequired, passwordLense, PASSWORD_REQUIRED_MSG, data)\r\n  )\r\n\r\nexport const validateUserRegistrationTask = (data) =>\r\n  ValidateRegistration.ap(validateName(data))\r\n    .ap(validateEmails(data))\r\n    .ap(validatePasswords(data))\r\n    .failureMap(mergeAll)\r\n    .toTask()\r\n\r\nexport const validateLoginTask = (data) =>\r\n  ValidateLogin.ap(validateEmail(data))\r\n    .ap(validatePassword(data))\r\n    .failureMap(mergeAll)\r\n    .toTask()\r\n","import { HTTP } from \"Utils\"\nimport { mergeDeepWith, add } from \"ramda\"\n\nconst mergeCarts = (accnt) => (cart) => mergeDeepWith(add, cart, accnt)\n\nconst toAccountVM = (mdl) => (accnts) => {\n  let cart = mergeCarts(JSON.parse(accnts[0].cart))(mdl.cart)\n  mdl.user.account = { objectId: accnts[0].objectId, cart }\n  mdl.user.address = JSON.parse(accnts[0].address)\n  mdl.cart = cart\n  return cart\n}\n\nconst setUserToken = (mdl) => (user) => {\n  sessionStorage.setItem(\"shindigit-user\", JSON.stringify(user))\n  sessionStorage.setItem(\"shindigit-user-token\", user[\"user-token\"])\n  mdl.state.isAuth(true)\n  mdl.user = user\n  return user\n}\n\nexport const loginUserTask = (mdl) => ({ email, password }) =>\n  HTTP.backEnd\n    .postTask(mdl)(\"users/login\")({\n      login: email,\n      password: password,\n    })\n    .map(setUserToken(mdl))\n\nconst getUserAccountTask = (mdl) => (_) =>\n  HTTP.backEnd\n    .getTask(mdl)(`data/Accounts?where=userId%3D'${mdl.user.objectId}'`)\n    .map(toAccountVM(mdl))\n\nexport const loginTask = (mdl) => ({ email, password }) =>\n  loginUserTask(mdl)({ email, password })\n\nexport const registerUserTask = (mdl) => ({ name, email, password, isAdmin }) =>\n  HTTP.backEnd.postTask(mdl)(\"users/register\")({\n    name,\n    email,\n    password,\n    isAdmin,\n  })\n\nexport const createAccountTask = (mdl) =>\n  HTTP.backEnd.postTask(mdl)(\"data/Accounts\")({\n    cart: JSON.stringify(mdl.cart),\n    userId: mdl.user.objectId,\n  })\n\nexport const linkAccountTask = (mdl) =>\n  HTTP.backEnd.postTask(mdl)(\n    `data/Users/${mdl.user.objectId}/account%3AAccounts%3A1`\n  )([mdl.user.account.objectId])\n","import { NavLink } from \"Components\"\nimport { jsonCopy, shortDate } from \"Utils\"\nimport { validateLoginTask } from \"./Validations.js\"\nimport { loginTask } from \"./fns.js\"\n\nconst validateForm = (mdl) => (data) => {\n  const onError = (errs) => {\n    if (errs) {\n      state.errors = errs\n      state.errorMsg(errs.message)\n      state.showErrorMsg(true)\n      console.log(\"failed - state\", state)\n    } else {\n      state.errorMsg(\"Issue with logging in. Have you registered?\")\n      state.showErrorMsg(true)\n      console.log(\"failed - other?\", state)\n    }\n  }\n\n  const onSuccess = (mdl) => (account) => {\n    state.errors = {}\n    mdl.user.account = account\n    m.route.set(`/${mdl.user.name}/${shortDate()}`)\n  }\n\n  state.isSubmitted = true\n\n  validateLoginTask(data.userModel)\n    .chain(loginTask(mdl))\n    .fork(onError, onSuccess(mdl))\n}\n\nconst userModel = {\n  name: \"\",\n  email: \"\",\n  password: \"\",\n  confirmEmail: \"\",\n  confirmPassword: \"\",\n  isAdmin: false,\n}\n\nconst dataModel = { userModel }\n\nconst state = {\n  isSubmitted: false,\n  errors: {},\n  httpError: undefined,\n  data: jsonCopy(dataModel),\n  showErrorMsg: Stream(false),\n  errorMsg: Stream(\"\"),\n}\n\nconst resetState = () => {\n  state.data = jsonCopy(dataModel)\n  state.errors = {}\n  state.httpError = undefined\n  state.isSubmitted = false\n  state.showErrorMsg(false)\n  state.errorMsg(\"\")\n}\n\nexport const Login = () => {\n  console.log(\"login\")\n  return {\n    onremove: () => resetState(),\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".frow centered pt-30\",\n        [\n          state.showErrorMsg() && m(\"code.warning\", state.errorMsg()),\n          m(\n            \"form.frow-container frow-center\",\n            {\n              role: \"form\",\n              id: \"Login-form\",\n              onsubmit: (e) => e.preventDefault(),\n            },\n            [\n              m(\"input.auth-input\", {\n                class: state.isSubmitted\n                  ? state.errors.email\n                    ? \"has-error\"\n                    : \"has-success\"\n                  : \"\",\n                id: \"reg-email\",\n                type: \"email\",\n                placeholder: \"Email\",\n                onkeyup: (e) => {\n                  // state.isSubmitted && validateForm(mdl)(state.data)\n                  state.data.userModel.email = e.target.value\n                },\n                value: state.data.userModel.email,\n              }),\n              state.errors.email && m(\"p.auth-input-hint\", state.errors.email),\n\n              m(\"input.auth-input\", {\n                class: state.isSubmitted\n                  ? state.errors.password\n                    ? \"has-error\"\n                    : \"has-success\"\n                  : \"\",\n                id: \"reg-pass\",\n                type: \"password\",\n                placeholder: \"Password\",\n                onkeyup: (e) => {\n                  // state.isSubmitted && validateForm(mdl)(state.data)\n                  state.data.userModel.password = e.target.value\n                },\n                value: state.data.userModel.password,\n              }),\n              state.errors.password &&\n                m(\"p.auth-input-hint\", state.errors.password),\n            ]\n          ),\n          state.httpError && m(\".toast toast-error\", state.httpError),\n        ],\n        m(\n          \"a.button.auth-btn\",\n          {\n            // type: \"submit\",\n            form: `login-form`,\n            onclick: () => validateForm(mdl)(state.data),\n            class: mdl.state.isLoading() && \"loading\",\n          },\n          \"Login\"\n        ),\n        m(\n          m.route.Link,\n          {\n            href: \"/register\",\n            class: \"bold\",\n          },\n          \"Need to  register ?\"\n        )\n      ),\n  }\n}\n\nexport default Login\n","import { jsonCopy, shortDate } from \"Utils\"\nimport { validateUserRegistrationTask } from \"./Validations\"\nimport { loginUserTask, registerUserTask } from \"./fns.js\"\n\nconst userModel = {\n  name: \"\",\n  email: \"\",\n  password: \"\",\n  confirmEmail: \"\",\n  confirmPassword: \"\",\n}\n\nconst dataModel = { userModel }\n\nconst state = {\n  isSubmitted: false,\n  errors: {},\n  httpError: undefined,\n  data: jsonCopy(dataModel),\n  showErrorMsg: Stream(false),\n  errorMsg: Stream(\"\"),\n}\n\nconst resetState = () => {\n  state.data = jsonCopy(dataModel)\n  state.errors = {}\n  state.httpError = undefined\n  state.isSubmitted = false\n  state.showErrorMsg(false)\n  state.errorMsg(\"\")\n}\n\nexport const validateForm = (mdl) => (data) => {\n  const onError = (errs) => {\n    if (errs) {\n      state.errors = errs\n      state.errorMsg(errs.message)\n      state.showErrorMsg(true)\n      console.log(\"failed - state\", state)\n    } else {\n      state.errorMsg(\"There seems to be a problem please contact web support\")\n      state.showErrorMsg(true)\n      console.log(\"failed - state\", state)\n    }\n  }\n\n  const onSuccess = (mdl) => (data) => {\n    console.log(mdl, data)\n    state.errors = {}\n    sessionStorage.setItem(\"shindigit-user-token\", mdl.user[\"user-token\"])\n    sessionStorage.setItem(\"shindigit-user\", JSON.stringify(mdl.user))\n    m.route.set(`/${mdl.user.name}/${shortDate()}`)\n  }\n\n  state.isSubmitted = true\n  validateUserRegistrationTask(data.userModel)\n    .chain(registerUserTask(mdl))\n    .chain((_) =>\n      loginUserTask(mdl)({\n        email: data.userModel.email,\n        password: data.userModel.password,\n      })\n    )\n    .fork(onError, onSuccess(mdl))\n}\n\nconst RegisterUser = () => {\n  return {\n    view: ({ attrs: { data, errors, isSubmitted } }) => [\n      m(\"input.auth-input\", {\n        class: isSubmitted ? (errors.name ? \"has-error\" : \"has-success\") : \"\",\n        id: \"reg-name\",\n        type: \"text\",\n        placeholder: \"Full Name\",\n        onkeyup: (e) => (data.name = e.target.value),\n        value: data.name,\n      }),\n      errors.name && m(\"p.auth-input-hint\", errors.name),\n\n      m(\"input.auth-input\", {\n        class: isSubmitted ? (errors.email ? \"has-error\" : \"has-success\") : \"\",\n        id: \"reg-email\",\n        type: \"email\",\n        placeholder: \"Email\",\n        onkeyup: (e) => (data.email = e.target.value),\n        value: data.email,\n      }),\n      errors.email && m(\"p.auth-input-hint\", errors.email),\n\n      m(\"input.auth-input\", {\n        id: \"confirmEmail\",\n        class: isSubmitted\n          ? errors.confirmEmail\n            ? \"has-error\"\n            : \"has-success\"\n          : \"\",\n        type: \"email\",\n        placeholder: \"Confirm Email\",\n        onkeyup: (e) => (data.confirmEmail = e.target.value),\n        value: data.confirmEmail,\n      }),\n      errors.confirmEmail && m(\"p.auth-input-hint\", errors.confirmEmail),\n\n      m(\"input.auth-input\", {\n        class: isSubmitted\n          ? errors.password\n            ? \"has-error\"\n            : \"has-success\"\n          : \"\",\n        id: \"reg-pass\",\n        type: \"password\",\n        placeholder: \"Password\",\n        onkeyup: (e) => (data.password = e.target.value),\n        value: data.password,\n      }),\n      errors.password && m(\"p.auth-input-hint\", errors.password),\n\n      m(\"input.auth-input\", {\n        class: isSubmitted\n          ? errors.confirmPassword\n            ? \"has-error\"\n            : \"has-success\"\n          : \"\",\n        id: \"pass-confirm\",\n        type: \"password\",\n        placeholder: \"Confirm Password\",\n        onkeyup: (e) => (data.confirmPassword = e.target.value),\n        value: data.confirmPassword,\n      }),\n      errors.confirmPassword && m(\"p.auth-input-hint\", errors.confirmPassword),\n    ],\n  }\n}\n\nexport const Register = () => {\n  return {\n    onremove: () => resetState(),\n    view: ({ attrs: { mdl } }) => [\n      m(\".frow centered pt-30\", [\n        state.showErrorMsg() && m(\"code.warning\", state.errorMsg()),\n        m(\n          \"form.frow-container column-center\",\n          {\n            role: \"form\",\n            id: \"Register-form\",\n            onsubmit: (e) => e.preventDefault(),\n          },\n          [\n            m(RegisterUser, {\n              data: state.data.userModel,\n              errors: state.errors,\n              isSubmitted: state.isSubmitted,\n            }),\n            m(\n              \"a.button.auth-btn\",\n              {\n                form: `register-form`,\n                onclick: () => validateForm(mdl)(state.data),\n                class: mdl.state.isLoading() && \"loading\",\n              },\n              \"Register\"\n            ),\n            m(\n              m.route.Link,\n              {\n                href: \"/login\",\n                class: \"bold\",\n              },\n              \"Need to  login ?\"\n            ),\n          ]\n        ),\n      ]),\n\n      state.httpError && m(\".toast toast-error\", state.httpError),\n    ],\n  }\n}\n\nexport default Register\n","const gotoroute = (mdl) => m.route.set(`/${mdl.Event.date}`)\r\n\r\nconst deleteEvent = (mdl) => {\r\n  let { date, hour, min } = m.route.param()\r\n  delete mdl.Day.data[`${hour}:00`][min]\r\n  localStorage.setItem(date, JSON.stringify(mdl.Day.data))\r\n  m.redraw()\r\n  gotoroute(mdl)\r\n}\r\n\r\nexport const Event = ({ attrs: { mdl } }) => {\r\n  console.log(mdl)\r\n  return {\r\n    view: () =>\r\n      m(\".event-container\", [\r\n        m(\r\n          \"button\",\r\n          {\r\n            onclick: (e) => {\r\n              mdl.toAnchor(mdl.Event.startTime)\r\n              gotoroute(mdl)\r\n            },\r\n          },\r\n          \"Back\"\r\n        ),\r\n        m(\"h1\", mdl.Event.title),\r\n        m(\"label\", \"is All Day? \", mdl.Event.allday ? \"yes\" : \"No\"),\r\n        m(\"label\", \"date: \", mdl.Event.date),\r\n        m(\"label\", \"begins: \", mdl.Event.startTime),\r\n        m(\"label\", \"ends: \", mdl.Event.endTime),\r\n        m(\"label\", \"notes: \", mdl.Event.notes),\r\n        m(\"button\", { onclick: (e) => deleteEvent(mdl) }, \"delete\"),\r\n      ]),\r\n  }\r\n}\r\n","import { Calendar, Day } from \"Components\"\r\nimport { HTTP, locals } from \"Utils\"\r\n\r\nconst loadTask = (http) => (mdl) => locals.getTask(mdl.currentShortDate())\r\n\r\nconst onError = (state) => (err) => {\r\n  state.error = err\r\n  state.status = \"failed\"\r\n  m.redraw()\r\n}\r\n\r\nconst onSuccess = (mdl, state) => (data) => {\r\n  state.data = data\r\n  if (data) {\r\n    mdl.Day.data = data\r\n  }\r\n  state.error = null\r\n  state.status = \"success\"\r\n  m.redraw()\r\n}\r\n\r\nconst load = (state) => ({ attrs: { mdl } }) =>\r\n  loadTask(HTTP)(mdl).fork(onError(state), onSuccess(mdl, state))\r\n\r\nexport const Home = ({ attrs: { mdl } }) => {\r\n  const state = {\r\n    error: null,\r\n    status: \"loading\",\r\n  }\r\n\r\n  return {\r\n    oninit: load(state),\r\n    view: ({ attrs: { mdl } }) => {\r\n      return m(\".frow\", [\r\n        m(Calendar, { mdl }),\r\n        state.status == \"loading\" && m(\"p\", \"FETCHING TODAYS EVENTS...\"),\r\n        state.status == \"failed\" && m(\"p\", \"FAILED TO FETCH EVENTS\"),\r\n        state.status == \"success\" && m(Day, { mdl, events: state.data }),\r\n      ])\r\n    },\r\n  }\r\n}\r\n","export * from \"./home.js\"\r\nexport * from \"./event.js\"\r\nexport * from \"./Auth/login-user\"\r\nexport * from \"./Auth/register-user\"\r\n","export const popIn = [\n  {\n    transform: \"scale(0)\",\n    opacity: 1,\n  },\n  {\n    transform: \"scale(1)\",\n    opacity: 1,\n  },\n  {\n    transform: \"scale(0.8)\",\n    opacity: 1,\n  },\n  {\n    transform: \"scale(1)\",\n    opacity: 1,\n  },\n]\n\nexport const fadeIn = [\n  {\n    opacity: 0,\n  },\n  {\n    opacity: 1,\n  },\n]\n\nexport const fadeInUp = [\n  {\n    opacity: 0,\n    transform: \"translate3d(0, 40%, 0)\",\n  },\n  {\n    opacity: 1,\n    transform: \"translate3d(0, 0, 0)\",\n  },\n]\n\nexport const slideInRight = [\n  {\n    transform: \"translate3d(-50%, 0, 0)\",\n  },\n  {\n    transform: \"translate3d(0, 0, 0)\",\n    visibility: \"visible\",\n  },\n]\n\nexport const slideInLeft = [\n  {\n    transform: \"translate3d(80%, 0, 0)\",\n    visibility: \"visible\",\n  },\n  {\n    transform: \"translate3d(0, 0, 0)\",\n  },\n]\n\nexport const slideOutRight = [\n  {\n    transform: \"translate3d(0, 0, 0)\",\n  },\n  {\n    visibility: \"hidden\",\n    transform: \"translate3d(100%, 0, 0)\",\n  },\n]\n\nexport const slideInDown = [\n  {\n    transform: \"translate3d(0, -50%, 0)\",\n  },\n  {\n    transform: \"translate3d(0, 0, 0)\",\n    visibility: \"visible\",\n  },\n]\n","import { NoOp } from \"Utils\"\nexport * from \"./animations.js\"\n\nconst duration = {\n  duration: 700,\n  easing: \"ease-in-out\",\n  fill: \"forwards\",\n}\n\nfunction transitionEndPromise(element) {\n  const transitionEnded = (e) => {\n    // console.log(\"transitionEnded\", element, e)\n    if (e.target !== element) return\n    element.removeEventListener(\"transitionend\", transitionEnded)\n  }\n  return new Promise(() =>\n    element.addEventListener(\"transitionend\", transitionEnded)\n  )\n}\n\nexport const AnimatePage = (animation) => ({ dom }) => {\n  // let origStyles = jsonCopy(dom.style)\n  // dom.style.position = \"absolute\"\n  // dom.style.top = -19\n  // dom.style.width = \"100%\"\n  Animate(animation)({ dom })\n  // Animate(animation)({ dom })\n}\n\nexport const Animate = (animation, pause = NoOp) => ({ dom }) =>\n  setTimeout(\n    () =>\n      dom.animate(animation, duration).finished.then(transitionEndPromise(dom)),\n    pause()\n  )\n\nexport const AnimateChildren = (animation, pause) => ({ dom }) => {\n  let children = [...dom.children]\n\n  children.map((child, idx) => {\n    child.style.opacity = 0\n    setTimeout(() => {\n      child.style.opacity = 1\n      Animate(animation)({ dom: child })\n    }, pause())\n  })\n}\n","//NEED TO MOVE THESE TO ENVIRONMENT/GITLAB IN PRODUCTION for manifest\r\n\r\nconst getUserToken = () =>\r\n  sessionStorage.getItem(\"shindigit-user-token\")\r\n    ? sessionStorage.getItem(\"shindigit-user-token\")\r\n    : \"\"\r\n\r\nconst BackEnd = {\r\n  API_KEY: \"3E894DDB-58BB-4F18-9E1D-809BBF807C1C\",\r\n  APP_ID: \"854DB087-FA48-0CF1-FFEE-7660CF37E100\",\r\n  baseUrl: \"https://api.backendless.com\",\r\n  headers: () => ({ \"user-token\": getUserToken() }),\r\n}\r\n\r\nexport { BackEnd }\r\n","import Task from \"data.task\"\r\nimport { BackEnd } from \"./.secrets.js\"\r\n\r\nconst onProgress = (mdl) => (e) => {\r\n  if (e.lengthComputable) {\r\n    mdl.state.loadingProgress.max = e.total\r\n    mdl.state.loadingProgress.value = e.loaded\r\n    m.redraw()\r\n  }\r\n}\r\n\r\nfunction onLoad() {\r\n  return false\r\n}\r\n\r\nconst onLoadStart = (mdl) => (e) => {\r\n  mdl.state.isLoading(true)\r\n  return false\r\n}\r\n\r\nconst onLoadEnd = (mdl) => (e) => {\r\n  mdl.state.isLoading(false)\r\n  mdl.state.loadingProgress.max = 0\r\n  mdl.state.loadingProgress.value = 0\r\n  return false\r\n}\r\n\r\nconst xhrProgress = (mdl) => ({\r\n  config: (xhr) => {\r\n    xhr.onprogress = onProgress(mdl)\r\n    xhr.onload = onLoad\r\n    xhr.onloadstart = onLoadStart(mdl)\r\n    xhr.onloadend = onLoadEnd(mdl)\r\n  },\r\n})\r\n\r\nexport const parseHttpError = (mdl) => (rej) => (e) => {\r\n  mdl.state.isLoading(false)\r\n  return rej(e.response)\r\n}\r\n\r\nexport const parseHttpSuccess = (mdl) => (res) => (data) => {\r\n  mdl.state.isLoading(false)\r\n  return res(data)\r\n}\r\n\r\nconst getUserToken = () =>\r\n  window.sessionStorage.getItem(\"user-token\")\r\n    ? window.sessionStorage.getItem(\"user-token\")\r\n    : \"\"\r\n\r\nconst HttpTask = (_headers) => (method) => (mdl) => (url) => (body) => {\r\n  mdl.state.isLoading(true)\r\n  return new Task((rej, res) =>\r\n    m\r\n      .request({\r\n        method,\r\n        url,\r\n        headers: {\r\n          \"content-type\": \"application/json\",\r\n          ..._headers,\r\n        },\r\n        body,\r\n        withCredentials: false,\r\n        ...xhrProgress(mdl),\r\n      })\r\n      .then(parseHttpSuccess(mdl)(res), parseHttpError(mdl)(rej))\r\n  )\r\n}\r\n\r\nconst backEndUrl = `${BackEnd.baseUrl}/${BackEnd.APP_ID}/${BackEnd.API_KEY}/`\r\nconst backEnd = {\r\n  getTask: (mdl) => (url) =>\r\n    HttpTask(BackEnd.headers())(\"GET\")(mdl)(backEndUrl + url)(null),\r\n  postTask: (mdl) => (url) => (dto) =>\r\n    HttpTask(BackEnd.headers())(\"POST\")(mdl)(backEndUrl + url)(dto),\r\n  putTask: (mdl) => (url) => (dto) =>\r\n    HttpTask(BackEnd.headers())(\"PUT\")(mdl)(backEndUrl + url)(dto),\r\n}\r\n\r\nexport const HTTP = {\r\n  backEnd,\r\n  HttpTask,\r\n}\r\n","export * from \"./http.js\"\nexport * from \"./local-storage.js\"\nexport * from \"./validations\"\n\nexport const log = (m) => (v) => {\n  console.log(m, v)\n  return v\n}\n\nconst secureImg = (url) =>\n  url.match(/(https)./) ? url : url.replace(\"http\", \"https\")\n\nexport const randomPause = () => Math.random() * 1000\nexport const Pause = (n) => n * 1000\nexport const NoOp = () => {}\nexport const nameFromRoute = (route) => route.split(\"/\")[1].toUpperCase()\n\nexport const jsonCopy = (data) => JSON.parse(JSON.stringify(data))\n\nexport const isSideBarActive = (mdl) =>\n  mdl.settings.profile !== \"desktop\" && mdl.status.sidebar\n\nexport const range = (size) => [...Array(size).keys()]\n\nexport const shortDate = (date = new Date()) =>\n  new Date(date).toISOString().split(\"T\")[0]\n\nexport const isLeapYear = (year) =>\n  year % 4 == 0\n    ? false\n    : year % 100 == 0\n    ? year % 400 == 0\n      ? true\n      : false\n    : false\n\nexport const daysOfTheWeek = [\n  \"Monday\",\n  \"Teusday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\",\n  \"Sunday\",\n]\n\nexport const monthsOfTheYear = [\n  \"January\",\n  \"Febuary\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n]\n\nexport const getFullDate = ({ year, month, day }, startHour, startMin) =>\n  new Date(year, month, day, startHour, startMin)\n\nexport const toHourViewModel = (date) => (mdl, hour) => {\n  if (!mdl[date][hour]) {\n    mdl[date][hour] = {}\n  }\n  return mdl\n}\n\nexport const pad0Left = (num) => `0${num}`\n\nexport const formatDateString = ({ year, month, day }) => {\n  let padded = (d) => (d.toString().length == 1 ? pad0Left(d) : d)\n\n  return `${year}-${padded(month)}-${padded(day)}`\n}\n\nexport const isEqual = (a, b) => JSON.stringify(a) == JSON.stringify(b)\n\nexport const pad00Min = (num) => `${num}:00`\n\nexport const getHoursInDay = (format) =>\n  range(format == \"24hrs\" ? 24 : 12)\n    .map((n) => (n.toString().length == 1 ? pad0Left(n) : n))\n    .map(pad00Min)\n","import Task from \"data.task\"\r\n\r\nconst newTaskFromPromise = (p) => new Task((res, rej) => p.then(res, rej))\r\n\r\nexport const locals = {\r\n  getTask: (key) =>\r\n    newTaskFromPromise(\r\n      new Promise(\r\n        (_, res) =>\r\n          localStorage.getItem(key)\r\n            ? res(JSON.parse(localStorage.getItem(key)))\r\n            : res(null)\r\n        // hack just for now\r\n      )\r\n    ),\r\n  setTask: (key) => (value) =>\r\n    newTaskFromPromise(\r\n      new Promise((res) => res(localStorage.setItem(key, value)))\r\n    ),\r\n}\r\n","import {\r\n  compose,\r\n  curry,\r\n  isEmpty,\r\n  isNil,\r\n  length,\r\n  gte,\r\n  test,\r\n  not,\r\n  view,\r\n  set,\r\n  contains,\r\n  map,\r\n  toUpper,\r\n} from \"ramda\"\r\nimport { Success, Failure } from \"data.validation\"\r\nimport Maybe from \"data.maybe\"\r\n\r\nexport const getOrElse = (val) => (x) => x.getOrElse(val)\r\n\r\nexport const validate = curry((rule, lens, msg, data) =>\r\n  rule(view(lens, data)) ? Success(data) : Failure([set(lens, msg, {})])\r\n)\r\n\r\nexport const isRequired = compose(not, isEmpty)\r\n\r\nexport const IsNotNil = compose(not, isNil)\r\n\r\nexport const isNotNullOrEmpty = (data) => !isNullOrEmpty(data)\r\n\r\nexport const isNullOrEmpty = (data) => isNil(data) || isEmpty(data)\r\n\r\nexport const maxLength = (max) => compose(gte(max), length)\r\n\r\nexport const maxSize = curry((max, value) => gte(max, value))\r\n\r\nexport const emailFormat = test(/@/)\r\n\r\nexport const onlyAlpha = test(/^[a-zA-Z]*$/)\r\n\r\nexport const onlyAlphaNumeric = test(/^[a-zA-Z0-9]*$/)\r\n\r\nexport const onlyAlphaNumericUnderscore = test(/^[a-zA-Z0-9_]*$/)\r\n\r\nexport const onlyAlphaNumericSpace = test(/^[a-zA-Z0-9\\s]*$/)\r\n\r\nexport const onlyAlphaNumericSpaceUnderscore = test(/^[a-zA-Z0-9_\\s]*$/)\r\n\r\nexport const onlyAlphaNumericSpaceSpecial = test(\r\n  /^[a-zA-Z0-9_.~!*''();:@&=+$,/?#[%-\\]+\\s]*$/\r\n)\r\n\r\nexport const phoneFormat = test(/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/)\r\n\r\nexport const urlFormat = test(/^[a-zA-Z0-9_.~!*''();:@&=+$,/?#[%-\\]+]*$/)\r\n\r\nexport const onlyNumeric = test(/^[0-9]*$/)\r\n\r\nexport const maxLengthNullable = (max) =>\r\n  compose(getOrElse(false), map(gte(max)), map(length), Maybe.fromNullable)\r\n\r\nexport const unique = curry((keys, value) => {\r\n  let lookup = Maybe.fromNullable(keys)\r\n  return !contains(\r\n    toUpper(value.toString()),\r\n    map((y) => toUpper(y.toString()), lookup.getOrElse([]))\r\n  )\r\n})\r\n\r\nexport const inDateRange = curry((start, end, value) => {\r\n  if (value == null || value === \"\") {\r\n    return true\r\n  }\r\n\r\n  return new Date(start) <= new Date(value) && new Date(value) < new Date(end)\r\n})\r\n\r\nexport const allCaps = (str) => str.toUpperCase() === str\r\n\r\nexport const isNilOrEmptyOrAtom = (item) =>\r\n  isNil(item) || isEmpty(item) || item === \"{$type:atom}\"\r\n","import routes from \"./routes.js\"\nimport model from \"./model.js\"\nimport { shortDate } from \"Utils\"\nimport { FunConfig } from \"@boazblake/fun-config\"\nFunConfig.configure()\n\nconst root = document.body\nlet winW = window.innerWidth\n\nif (module.hot) {\n  module.hot.accept()\n}\n\nif (process.env.NODE_ENV == \"development\") {\n  console.log(\"Looks like we are in development mode!\")\n} else {\n  if (\"serviceWorker\" in navigator) {\n    window.addEventListener(\"load\", () => {\n      navigator.serviceWorker\n        .register(\"./service-worker.js\")\n        .then((registration) => {\n          console.log(\"⚙️ SW registered: \", registration)\n        })\n        .catch((registrationError) => {\n          console.log(\"🧟 SW registration failed: \", registrationError)\n        })\n    })\n  }\n}\n\n// set display profiles\nconst getProfile = (w) => {\n  if (w < 668) return \"phone\"\n  if (w < 920) return \"tablet\"\n  return \"desktop\"\n}\n\nconst checkWidth = (winW) => {\n  const w = window.innerWidth\n  if (winW !== w) {\n    winW = w\n    var lastProfile = model.settings.profile\n    model.settings.profile = getProfile(w)\n    if (lastProfile != model.settings.profile) m.redraw()\n  }\n  return requestAnimationFrame(checkWidth)\n}\n\nmodel.settings.profile = getProfile(winW)\n\ncheckWidth(winW)\n\nm.route(root, `/login`, routes(model))\n// m.route(root, `/${shortDate(new Date())}`, routes(model))\n","document.addEventListener(\"DOMContentLoaded\", () => {\n  require(\"./index.js\")\n})\n","import { calendarModel } from \"Components/calendar/model\"\nimport { dayModel } from \"Components\"\n\nconst model = {\n  toAnchor: Stream(false),\n  timeFormats: [\"12hrs\", \"24hrs\"],\n  format: Stream(1),\n  currentShortDate: Stream(\"\"),\n  currentLongDate: Stream(new Date()),\n  selectedDate: { year: \"\", month: \"\", day: \"\" },\n  Calendar: {\n    data: calendarModel(),\n  },\n  Day: {\n    timeFormat: Stream(\"kk:mm\"),\n    data: dayModel({ timeFormats: [\"24hrs\"], format: Stream(0) }, new Date()),\n  },\n  state: {\n    isAuth: Stream(false),\n    modal: Stream(false),\n    isLoading: Stream(false),\n    loadingProgress: { max: 0, value: 0 },\n    isLoggedIn: () => sessionStorage.getItem(\"token\"),\n  },\n  settings: { profile: \"\", inspector: \"\" },\n  slug: \"\",\n}\n\nexport default model\n","import { Home, Event, Login, Register } from \"Pages\"\nimport { calendarModel } from \"Components/calendar/model\"\nimport { dayModel } from \"Components\"\n\nconst routes = (mdl) => {\n  return {\n    \"/login\": {\n      render: () => m(Login, { mdl }),\n    },\n    \"/register\": {\n      render: () => m(Register, { mdl }),\n    },\n    \"/:username/:date\": {\n      onmatch: ({ date }) => {\n        let _d = date.split(\"-\")\n        mdl.currentShortDate(date)\n        mdl.currentLongDate(new Date(date))\n        mdl.selectedDate = { year: _d[0], month: _d[1], day: _d[2] }\n        mdl.Calendar.data = calendarModel(date)\n        mdl.Day.data = dayModel(mdl, date)\n      },\n      render: () => [m(Home, { mdl, key: mdl.currentLongDate() })],\n    },\n\n    \"/:username/:date/:hour/:min\": {\n      onmatch: ({ hour, min }) => {\n        mdl.Event = mdl.Day.data[`${hour}:00`][min]\n      },\n      render: () => [m(Event, { mdl, key: mdl.currentLongDate() })],\n    },\n  }\n}\n\nexport default routes\n"]}