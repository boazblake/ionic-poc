{"version":3,"sources":["app/action-sheet.js","app/app.js","app/index.js","app/initialize.js","app/model.js"],"names":["showSettings","mdl","showAction","actionSheetController","create","header","buttons","handler","state","mode","document","body","classList","toggle","window","matchMedia","text","then","x","present","calcOpacity","toTop","calcHeaderOpacity","scrolled","headerOpacity","newOpacity","n","map","dist","calcHeaderHeight","headerHeight","orig","h","parseInt","split","newHeight","console","log","calcHeaderPos","headerPos","pos","strPos","toString","calcImgScale","res","updateScroll","detail","scrollTop","Img","view","attrs","m","style","position","width","height","src","opacity","transform","List","top","strong","fontSize","album","title","expand","color","fill","margin","zIndex","tracks","track","idx","slot","featuring","time","App","scrollEvents","onionScroll","root","module","hot","accept","mount","Model","addEventListener","require"],"mappings":"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","file":"docs/app.js","sourcesContent":["import { actionSheetController } from \"@ionic/core\"\nexport const showSettings = (mdl) => {\n  const showAction = () => {\n    actionSheetController\n      .create({\n        header: \"Settings\",\n        buttons: [\n          {\n            handler: () => {\n              mdl.state.mode = mdl.state.mode == 'light' ? 'dark' : 'light'\n              document.body.classList.toggle('dark')\n              window.matchMedia('(prefers-color-scheme: dark)');\n          }, text: mdl.state.mode == 'light' ? 'Enter Dark Mode' : 'Enter Light Mode'  },\n        ],\n      })\n      .then(x=> x.present())\n  }\n  showAction()\n}\n","import { clamp } from \"ramda\"\n\nconst calcOpacity = (mdl) => mdl.state.toTop() / 350\n\nconst calcHeaderOpacity = ({ state: { scrolled, headerOpacity } }) => {\n  let newOpacity = (n) => {\n    let x = n / 350 - 1\n    return x\n  }\n\n  return scrolled.map((dist) =>\n    headerOpacity(newOpacity(dist + headerOpacity()))\n  )\n}\n\nconst calcHeaderHeight = ({ state: { scrolled, headerHeight } }) => {\n  let orig = (h) => parseInt(h().split(\"px\")[0])\n  let newHeight = (n) => {\n    let x = clamp(0, 50, n / 7) + \"px\"\n    return x\n  }\n  console.log(headerHeight())\n  scrolled.map((dist) => headerHeight(newHeight(dist + orig(headerHeight))))\n  return headerHeight()\n}\n\nconst calcHeaderPos = ({ state: { toTop, headerPos } }) => {\n  let pos = clamp(-35, 1, 1 / -headerPos().split(\"px\")[0] - toTop() + 50)\n  let strPos = pos.toString() + \"px\"\n  return headerPos(strPos)\n}\n\nconst calcImgScale = ({ state: { scrolled } }) => {\n  let res = scrolled() > 0 ? 1 : scrolled() / -100 + 1\n  console.log(res)\n  return res\n}\n\nconst updateScroll = (mdl) => ({ detail: { scrollTop } }) => {\n  let pos = 350 - scrollTop\n  mdl.state.scrolled(scrollTop)\n  mdl.state.toTop(clamp(0, 350, pos))\n}\n\nconst Img = {\n  view: ({ attrs: { mdl } }) =>\n    m(\n      \"section.img\",\n      {\n        style: {\n          position: \"fixed\",\n          width: \"100%\",\n          height: \"300px\",\n        },\n      },\n\n      m(\"img\", {\n        src: \"images/Get_Lucky.jpeg\",\n        style: {\n          width: \"100%\",\n          opacity: calcOpacity(mdl),\n          transform: `scale(${clamp(1, 1.5, calcImgScale(mdl))})`,\n        },\n      })\n    ),\n}\n\nconst List = {\n  view: ({ attrs: { mdl } }) =>\n    m(\n      \"section#list\",\n      {\n        style: {\n          position: \"absolute\",\n          top: \"25%\",\n          width: \"100%\",\n          height: \"100%\",\n        },\n      },\n      m(\n        \"h1.ion-text-center\",\n        {\n          strong: true,\n          style: { fontSize: \"3rem\", opacity: calcOpacity(mdl) },\n        },\n        m(\"ion-text\", mdl.album.title)\n      ),\n      m(\n        \"ion-button#shuffle\",\n        {\n          expand: \"block\",\n          color: \"success\",\n          fill: \"solid\",\n          strong: false,\n          style: {\n            position: \"sticky\",\n            top: \"-5px\",\n            width: \"300px\",\n            margin: \"0 auto\",\n            \"--border-radius\": \"100px\",\n            zIndex: 15,\n          },\n        },\n        m(\"ion-text\", m(\"h2\", \"SHUFFLE PLAY\"))\n      ),\n      m(\n        \"ion-list\",\n        {\n          style: { width: \"100%\" },\n        },\n        mdl.album.tracks.map((track, idx) =>\n          m(\n            \"ion-item\",\n            m(\"ion-avatar\", { slot: \"start\" }, m(\"ion-text\", idx + 1)),\n            m(\n              \"ion-label\",\n              m(\"ion-text\", m(\"h2\", track.title)),\n              m(\"ion-text\", m(\"ion-note\", track.featuring))\n            ),\n            m(\"ion-sub-title\", { slot: \"end\" }, m(\"ion-text\", track.time))\n          )\n        )\n      )\n    ),\n}\n\nexport const App = (mdl) => ({\n  view: () =>\n    m(\n      \"ion-app\",\n      {\n        \"full-screen\": true,\n      },\n      m(\n        \"ion-header\",\n        {\n          style: {\n            opacity: calcHeaderOpacity(mdl),\n            position: \"relative\",\n            top: calcHeaderPos(mdl),\n            height: calcHeaderHeight(mdl),\n            \"min-height\": \"0px\",\n            zIndex: 10,\n          },\n        },\n        m(\n          \"p.ion-text-center\",\n          {\n            strong: true,\n            style: {\n              color: \"white\",\n            },\n          },\n          m(\"ion-text\", mdl.album.title)\n        )\n      ),\n      m(\n        \"ion-content.full-screen.has-header\",\n        {\n          slot: \"primary\",\n          scrollEvents: true,\n          onionScroll: updateScroll(mdl),\n        },\n        m(Img, { mdl }),\n        m(List, { mdl })\n      )\n    ),\n})\n","import { App } from \"./app.js\"\nimport { Model } from \"./model\"\nconst root = document.body\n\nif (module.hot) {\n  module.hot.accept()\n}\n\nm.mount(root, App(Model))\n","document.addEventListener(\"DOMContentLoaded\", () => require(\"./index.js\"))\n","import Stream from \"mithril-stream\"\n\nexport const Model = {\n  state: {\n    mode: \"dark\",\n    headerHeight: Stream(\"0px\"),\n    headerPos: Stream(\"-350px\"),\n    headerOpacity: Stream(0),\n    toTop: Stream(350),\n    scrolled: Stream(0),\n  },\n  album: {\n    title: \"Random Access Memories\",\n    tracks: [\n      {\n        title: \"Give Life Back to Music\",\n        featuring: \"Nile Rodgers\",\n        time: \"4:34\",\n      },\n      {\n        title: \"The Game of Love\",\n        featuring: \"\",\n        time: \"5:22\",\n      },\n      {\n        title: \"Giorgio by Moroder\",\n        featuring: \"Giorgio Moroder\",\n        time: \"9:04\",\n      },\n      {\n        title: \"Within\",\n        featuring: \"Chilly Gonzales\",\n        time: \"3:48\",\n      },\n      {\n        title: \"Instant Crush\",\n        featuring: \"Julian Casablancas\",\n        time: \"5:37\",\n      },\n      {\n        title: \"Lose Yourself to Dance\",\n        featuring: \"Pharrell Williams and Nile Rodgers\",\n        time: \"5:53\",\n      },\n      {\n        title: \"Touch\",\n        featuring: \"Paul Williams\",\n        time: \"8:18\",\n      },\n      {\n        title: \"Get Lucky\",\n        featuring: \"Pharrell Williams and Nile Rodgers\",\n        time: \"6:07\",\n      },\n      {\n        title: \"Beyond\",\n        featuring: \"\",\n        time: \"4:50\",\n      },\n      {\n        title: \"Motherboard\",\n        featuring: \"\",\n        time: \"5:41\",\n      },\n      {\n        title: \"Fragments of Time\",\n        featuring: \"Todd Edwards\",\n        time: \"4:39\",\n      },\n      {\n        title: \"Doinâ€™ It Right\",\n        featuring: \"Panda Bear\",\n        time: \"4:11\",\n      },\n      {\n        title: \"Contact\",\n        featuring: \"DJ Falcon\",\n        time: \"6:21\",\n      },\n    ],\n  },\n}\n"]}